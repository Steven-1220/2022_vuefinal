"use strict";(self["webpackChunke_commerce_dessert"]=self["webpackChunke_commerce_dessert"]||[]).push([[47],{7106:function(e,s,a){a.d(s,{Z:function(){return se}});var l=a(3396),t=a(7139);const r=e=>((0,l.dD)("data-v-7885d8fe"),e=e(),(0,l.Cn)(),e),i={class:"pt-5"},o={class:"container"},c=r((()=>(0,l._)("h3",{class:"mb-3 text-primary fs-3"},"購物流程",-1))),d={class:"d-block d-sm-none"},n={class:"row row-cols-1 row-cols-lg-3"},m={class:"col"},p={class:"step-mobile"},u=r((()=>(0,l._)("span",null,"1",-1))),_=(0,l.Uk)(" 確認購買內容 "),b=r((()=>(0,l._)("i",{class:"bi bi-cart-check fs-5 ms-2"},null,-1))),v=[u,_,b],f={class:"col"},g={class:"step-mobile"},h=r((()=>(0,l._)("span",null,"2",-1))),w=(0,l.Uk)(" 填寫訂單資料 "),y=r((()=>(0,l._)("i",{class:"bi bi-pencil-square fs-5 ms-2"},null,-1))),k=[h,w,y],x={class:"col"},C={class:"step-mobile"},V=r((()=>(0,l._)("span",null,"3",-1))),N=(0,l.Uk)(" 確認付款資訊 "),U=r((()=>(0,l._)("i",{class:"bi bi-file-text fs-5 ms-2"},null,-1))),D=[V,N,U],W={class:"col"},q={class:"step-mobile"},L=r((()=>(0,l._)("span",null,"3",-1))),$=(0,l.Uk)(" 訂單付款完成 "),S=r((()=>(0,l._)("i",{class:"bi bi-credit-card fs-5 ms-2"},null,-1))),z=[L,$,S],E={class:"d-none d-sm-block"},I={class:"row"},Z={class:"col-12"},A={class:"progress-bar-container"},P=r((()=>(0,l._)("div",{class:"icon"},[(0,l._)("i",{class:"bi bi-cart-check"})],-1))),M=r((()=>(0,l._)("p",null,"1. 確認購買內容",-1))),O=[P,M],T=r((()=>(0,l._)("div",{class:"icon"},[(0,l._)("i",{class:"bi bi-pencil-square"})],-1))),j=r((()=>(0,l._)("p",null,"2. 填寫訂單資料",-1))),F=[T,j],H=r((()=>(0,l._)("div",{class:"icon"},[(0,l._)("i",{class:"bi bi-file-text"})],-1))),K=r((()=>(0,l._)("p",null,"3. 確認付款資訊",-1))),Y=[H,K],B=r((()=>(0,l._)("div",{class:"icon"},[(0,l._)("i",{class:"bi bi-credit-card"})],-1))),G=r((()=>(0,l._)("p",null,"4. 訂單付款完成",-1))),J=[B,G];function Q(e,s,a,r,u,_){return(0,l.wg)(),(0,l.iD)("section",i,[(0,l._)("div",o,[c,(0,l._)("div",d,[(0,l._)("div",n,[(0,l._)("div",m,[(0,l._)("div",p,[(0,l._)("p",{class:(0,t.C_)(["text-center border border-primary p-3 clear-overlap",{"bg-warning":Number(a.step)>=1,completed:Number(a.step)>=1}])},v,2)])]),(0,l._)("div",f,[(0,l._)("div",g,[(0,l._)("p",{class:(0,t.C_)(["text-center border border-primary p-3 clear-overlap",{"bg-warning":Number(a.step)>=2,completed:Number(a.step)>=2}])},k,2)])]),(0,l._)("div",x,[(0,l._)("div",C,[(0,l._)("p",{class:(0,t.C_)(["step-mobile text-center border border-primary p-3 clear-overlap",{"bg-warning":Number(a.step)>=3,completed:Number(a.step)>=3}])},D,2)])]),(0,l._)("div",W,[(0,l._)("div",q,[(0,l._)("p",{class:(0,t.C_)(["step-mobile text-center border border-primary p-3",{"bg-warning":Number(a.step)>=4,completed:Number(a.step)>=4}])},z,2)])])])]),(0,l._)("div",E,[(0,l._)("div",I,[(0,l._)("div",Z,[(0,l._)("div",A,[(0,l._)("div",{class:(0,t.C_)(["step",{completed:Number(a.step)>=1}])},O,2),(0,l._)("div",{class:(0,t.C_)(["line",{completed:Number(a.step)>=2}])},null,2),(0,l._)("div",{class:(0,t.C_)(["step",{completed:Number(a.step)>=2}])},F,2),(0,l._)("div",{class:(0,t.C_)(["line",{completed:Number(a.step)>=3}])},null,2),(0,l._)("div",{class:(0,t.C_)(["step",{completed:Number(a.step)>=3}])},Y,2),(0,l._)("div",{class:(0,t.C_)(["line",{completed:Number(a.step)>=4}])},null,2),(0,l._)("div",{class:(0,t.C_)(["step",{completed:Number(a.step)>=4}])},J,2)])])])])])])}var R={props:{step:String}},X=a(89);const ee=(0,X.Z)(R,[["render",Q],["__scopeId","data-v-7885d8fe"]]);var se=ee},4047:function(e,s,a){a.r(s),a.d(s,{default:function(){return R}});var l=a(3396),t=a(7139),r=a(9242);const i={class:"wrap"},o={class:"pb-md-5"},c={class:"container py-5"},d={class:"row"},n={class:"col-md-6 pb-3"},m={class:"card"},p=(0,l._)("div",{class:"card-header fs-4 bg-primary text-white"},"訂單內容",-1),u={class:"card-body"},_={class:"table-responsive"},b={class:"table"},v=(0,l._)("thead",{class:"text-nowrap"},[(0,l._)("tr",null,[(0,l._)("th",null,"產品名稱"),(0,l._)("th",null,"數量"),(0,l._)("th",null,"價格")])],-1),f={class:"text-nowrap"},g={scope:"row"},h={width:"20%"},w={width:"30%"},y={class:"card-footer bg-primary text-white"},k={class:"text-end"},x={key:0},C={class:"text-end fs-4"},V={class:"col-md-6"},N={class:"row justify-content-center g-4"},U={class:"col-md-10 pb-5"},D={class:"mb-3"},W=(0,l._)("label",{for:"email",class:"form-label"},[(0,l._)("span",{class:"text-danger"},"＊"),(0,l.Uk)("Email")],-1),q={class:"mb-3"},L=(0,l._)("label",{for:"name",class:"form-label"},[(0,l._)("span",{class:"text-danger"},"＊"),(0,l.Uk)("收件人姓名")],-1),$={class:"mb-3"},S=(0,l._)("label",{for:"tel",class:"form-label"},[(0,l._)("span",{class:"text-danger"},"＊"),(0,l.Uk)("收件人電話")],-1),z={class:"mb-3"},E=(0,l._)("label",{for:"address",class:"form-label"},[(0,l._)("span",{class:"text-danger"},"＊"),(0,l.Uk)("收件人地址")],-1),I={class:"mb-3"},Z=(0,l._)("label",{for:"payment",class:"form-label"},[(0,l._)("span",{class:"text-danger"},"＊"),(0,l.Uk)("付款方式")],-1),A=(0,l._)("option",{value:""},"請選擇付款方式",-1),P=(0,l._)("option",{value:"信用卡付款"},"信用卡付款",-1),M=(0,l._)("option",{value:"ATM 轉帳"},"ATM 轉帳",-1),O=(0,l._)("option",{value:"超商取貨付款"},"超商取貨付款",-1),T={class:"mb-3"},j=(0,l._)("label",{for:"message",class:"form-label"},"留言",-1),F={class:"text-end"},H=["disabled"];function K(e,s,a,K,Y,B){const G=(0,l.up)("ProgressView"),J=(0,l.up)("VueLoading"),Q=(0,l.up)("VField"),R=(0,l.up)("ErrorMessage"),X=(0,l.up)("VForm");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l.Wm)(G,{step:"2"}),(0,l._)("section",o,[(0,l.Wm)(J,{active:Y.isLoading},null,8,["active"]),(0,l._)("div",c,[(0,l._)("div",d,[(0,l._)("div",n,[(0,l._)("div",m,[p,(0,l._)("div",u,[(0,l._)("div",_,[(0,l._)("table",b,[v,(0,l._)("tbody",f,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Y.cartData.carts,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",g,(0,t.zw)(e.product.title),1),(0,l._)("td",h,(0,t.zw)(e.qty),1),(0,l._)("td",w," $ "+(0,t.zw)(e.product.price)+"/ "+(0,t.zw)(e.product.unit),1)])))),128))])])])]),(0,l._)("div",y,[(0,l._)("p",k," 總價 : $"+(0,t.zw)(e.$filters.numberAddComma(Y.cartData.total)),1),Y.cartData.total!==Y.cartData.final_total?((0,l.wg)(),(0,l.iD)("div",x,[(0,l._)("p",C," 折扣後總價 : $"+(0,t.zw)(e.$filters.numberAddComma(Y.cartData.total-Y.cartData.final_total)),1)])):(0,l.kq)("",!0)])])]),(0,l._)("div",V,[(0,l._)("div",N,[(0,l._)("div",U,[(0,l.Wm)(X,{ref:"form",class:"col-md-6 w-100",onSubmit:B.sendOrder},{default:(0,l.w5)((({errors:e})=>[(0,l._)("div",D,[W,(0,l.Wm)(Q,{id:"email",name:"email",type:"email",class:(0,t.C_)(["form-control",{"is-invalid":e["email"]}]),rules:"email|required",placeholder:"請輸入 Email",modelValue:Y.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=e=>Y.form.user.email=e)},null,8,["class","modelValue"]),(0,l.Wm)(R,{name:"email",class:"invalid-feedback"})]),(0,l._)("div",q,[L,(0,l.Wm)(Q,{id:"name",name:"姓名",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:Y.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=e=>Y.form.user.name=e)},null,8,["class","modelValue"]),(0,l.Wm)(R,{name:"姓名",class:"invalid-feedback"})]),(0,l._)("div",$,[S,(0,l.Wm)(Q,{id:"tel",name:"電話",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:B.isPhone,modelValue:Y.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=e=>Y.form.user.tel=e)},null,8,["class","rules","modelValue"]),(0,l.Wm)(R,{name:"電話",class:"invalid-feedback"})]),(0,l._)("div",z,[E,(0,l.Wm)(Q,{id:"address",name:"地址",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:Y.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=e=>Y.form.user.address=e)},null,8,["class","modelValue"]),(0,l.Wm)(R,{name:"地址",class:"invalid-feedback"})]),(0,l._)("div",I,[Z,(0,l.Wm)(Q,{class:(0,t.C_)(["form-select mb-3",{"is-invalid":e["付款方式"]}]),id:"payment",name:"付款方式",rules:"required",as:"select",modelValue:Y.form.user.payment,"onUpdate:modelValue":s[4]||(s[4]=e=>Y.form.user.payment=e)},{default:(0,l.w5)((()=>[A,P,M,O])),_:2},1032,["class","modelValue"]),(0,l.Wm)(R,{name:"付款方式",class:"invalid-feedback"})]),(0,l._)("div",T,[j,(0,l.wy)((0,l._)("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[5]||(s[5]=e=>Y.form.message=e)},null,512),[[r.nr,Y.form.message]])]),(0,l._)("div",F,[(0,l._)("button",{type:"submit",class:"btn btn-danger",disabled:Object.keys(e).length>0||Y.loadingState}," 送出訂單 ",8,H)])])),_:1},8,["onSubmit"])])])])])])])])}var Y=a(7897),B=a(7106),G={components:{ProgressView:B.Z},data(){return{cartData:{carts:[]},form:{user:{name:"",email:"",tel:"",address:"",payment:""},message:""},isLoading:!1,loadingState:!1,orderId:""}},methods:{sendOrder(){const e=this.form;this.loadingState=!0;const s="https://vue3-course-api.hexschool.io/v2/api/steven1220/order";this.$http.post(s,{data:e}).then((e=>{this.orderId=e.data.orderId,this.loadingState=!1,this.form.message="",this.$router.push({name:"完成訂單",query:{id:this.orderId}})})).catch((e=>{console.log(e.response.data)}))},getCartList(){const e="https://vue3-course-api.hexschool.io/v2/api/steven1220/cart";this.$http.get(e).then((e=>{this.cartData=e.data.data,Y.Z.emit("toggle-menu")})).catch((e=>{console.log(e.response.data)}))},isPhone(e){const s=/^(09)[0-9]{8}$/;return!!s.test(e)||"請輸入正確的電話號碼"},LoadingEffect(){this.isLoading=!0,setTimeout((()=>{this.isLoading=!1}),500)}},mounted(){this.LoadingEffect(),this.getCartList()}},J=a(89);const Q=(0,J.Z)(G,[["render",K]]);var R=Q}}]);
//# sourceMappingURL=47.3a068f4c.js.map