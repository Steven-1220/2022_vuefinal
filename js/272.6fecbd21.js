"use strict";(self["webpackChunke_commerce_dessert"]=self["webpackChunke_commerce_dessert"]||[]).push([[272],{7106:function(e,s,t){t.d(s,{Z:function(){return se}});var l=t(3396),r=t(7139);const a=e=>((0,l.dD)("data-v-7885d8fe"),e=e(),(0,l.Cn)(),e),i={class:"pt-5"},d={class:"container"},c=a((()=>(0,l._)("h3",{class:"mb-3 text-primary fs-3"},"購物流程",-1))),n={class:"d-block d-sm-none"},o={class:"row row-cols-1 row-cols-lg-3"},_={class:"col"},p={class:"step-mobile"},u=a((()=>(0,l._)("span",null,"1",-1))),b=(0,l.Uk)(" 確認購買內容 "),m=a((()=>(0,l._)("i",{class:"bi bi-cart-check fs-5 ms-2"},null,-1))),v=[u,b,m],w={class:"col"},h={class:"step-mobile"},g=a((()=>(0,l._)("span",null,"2",-1))),f=(0,l.Uk)(" 填寫訂單資料 "),y=a((()=>(0,l._)("i",{class:"bi bi-pencil-square fs-5 ms-2"},null,-1))),k=[g,f,y],C={class:"col"},x={class:"step-mobile"},N=a((()=>(0,l._)("span",null,"3",-1))),z=(0,l.Uk)(" 確認付款資訊 "),D=a((()=>(0,l._)("i",{class:"bi bi-file-text fs-5 ms-2"},null,-1))),$=[N,z,D],O={class:"col"},L={class:"step-mobile"},q=a((()=>(0,l._)("span",null,"3",-1))),P=(0,l.Uk)(" 訂單付款完成 "),Z=a((()=>(0,l._)("i",{class:"bi bi-credit-card fs-5 ms-2"},null,-1))),U=[q,P,Z],j={class:"d-none d-sm-block"},V={class:"row"},W={class:"col-12"},A={class:"progress-bar-container"},H=a((()=>(0,l._)("div",{class:"icon"},[(0,l._)("i",{class:"bi bi-cart-check"})],-1))),I=a((()=>(0,l._)("p",null,"1. 確認購買內容",-1))),S=[H,I],Y=a((()=>(0,l._)("div",{class:"icon"},[(0,l._)("i",{class:"bi bi-pencil-square"})],-1))),E=a((()=>(0,l._)("p",null,"2. 填寫訂單資料",-1))),K=[Y,E],R=a((()=>(0,l._)("div",{class:"icon"},[(0,l._)("i",{class:"bi bi-file-text"})],-1))),B=a((()=>(0,l._)("p",null,"3. 確認付款資訊",-1))),F=[R,B],G=a((()=>(0,l._)("div",{class:"icon"},[(0,l._)("i",{class:"bi bi-credit-card"})],-1))),J=a((()=>(0,l._)("p",null,"4. 訂單付款完成",-1))),M=[G,J];function Q(e,s,t,a,u,b){return(0,l.wg)(),(0,l.iD)("section",i,[(0,l._)("div",d,[c,(0,l._)("div",n,[(0,l._)("div",o,[(0,l._)("div",_,[(0,l._)("div",p,[(0,l._)("p",{class:(0,r.C_)(["text-center border border-primary p-3 clear-overlap",{"bg-warning":Number(t.step)>=1,completed:Number(t.step)>=1}])},v,2)])]),(0,l._)("div",w,[(0,l._)("div",h,[(0,l._)("p",{class:(0,r.C_)(["text-center border border-primary p-3 clear-overlap",{"bg-warning":Number(t.step)>=2,completed:Number(t.step)>=2}])},k,2)])]),(0,l._)("div",C,[(0,l._)("div",x,[(0,l._)("p",{class:(0,r.C_)(["step-mobile text-center border border-primary p-3 clear-overlap",{"bg-warning":Number(t.step)>=3,completed:Number(t.step)>=3}])},$,2)])]),(0,l._)("div",O,[(0,l._)("div",L,[(0,l._)("p",{class:(0,r.C_)(["step-mobile text-center border border-primary p-3",{"bg-warning":Number(t.step)>=4,completed:Number(t.step)>=4}])},U,2)])])])]),(0,l._)("div",j,[(0,l._)("div",V,[(0,l._)("div",W,[(0,l._)("div",A,[(0,l._)("div",{class:(0,r.C_)(["step",{completed:Number(t.step)>=1}])},S,2),(0,l._)("div",{class:(0,r.C_)(["line",{completed:Number(t.step)>=2}])},null,2),(0,l._)("div",{class:(0,r.C_)(["step",{completed:Number(t.step)>=2}])},K,2),(0,l._)("div",{class:(0,r.C_)(["line",{completed:Number(t.step)>=3}])},null,2),(0,l._)("div",{class:(0,r.C_)(["step",{completed:Number(t.step)>=3}])},F,2),(0,l._)("div",{class:(0,r.C_)(["line",{completed:Number(t.step)>=4}])},null,2),(0,l._)("div",{class:(0,r.C_)(["step",{completed:Number(t.step)>=4}])},M,2)])])])])])])}var T={props:{step:String}},X=t(89);const ee=(0,X.Z)(T,[["render",Q],["__scopeId","data-v-7885d8fe"]]);var se=ee},8272:function(e,s,t){t.r(s),t.d(s,{default:function(){return G}});var l=t(3396),r=t(7139);const a={class:"wrap"},i={class:"pb-md-5"},d={class:"container pb-5"},c={class:"row py-5"},n={class:"col-md-6 pb-4"},o={class:"card"},_=(0,l._)("div",{class:"card-header fs-4 bg-primary text-white"},"訂單內容",-1),p={class:"card-body"},u={class:"table-responsive"},b={class:"table"},m=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"產品名稱"),(0,l._)("th",null,"數量"),(0,l._)("th",null,"單價")])],-1),v={class:"text-nowrap"},w={scope:"row"},h={width:"20%"},g={width:"30%"},f={class:"card-footer bg-primary text-white"},y={key:0,class:"text-end fs-4"},k={key:1,class:"text-end fs-4"},C={class:"col"},x={class:"card"},N=(0,l._)("div",{class:"card-header fs-4 bg-primary text-white"}," 您的收件資訊 ",-1),z={class:"card-body"},D={class:"table-responsive"},$={class:"table"},O={class:"text-nowrap"},L=(0,l._)("td",null,"訂單時間",-1),q=(0,l._)("td",null,"訂單編號",-1),P=(0,l._)("td",null,"收件人",-1),Z=(0,l._)("td",null,"電話",-1),U=(0,l._)("td",null,"email",-1),j=(0,l._)("td",null,"取貨地點",-1),V=(0,l._)("td",null,"付款方式",-1),W=(0,l._)("td",null,"備註",-1),A=(0,l._)("td",null,"付款狀態",-1),H={key:0},I={class:"card-footer d-flex justify-content-end bg-primary"},S=(0,l.Uk)("確認付款");function Y(e,s,t,Y,E,K){const R=(0,l.up)("VueLoading"),B=(0,l.up)("ProgressView"),F=(0,l.up)("RouterLink");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(R,{active:E.isLoading},null,8,["active"]),(0,l._)("div",a,[(0,l.Wm)(B,{step:"3"}),(0,l._)("section",i,[(0,l._)("div",d,[(0,l._)("div",c,[(0,l._)("div",n,[(0,l._)("div",o,[_,(0,l._)("div",p,[(0,l._)("div",u,[(0,l._)("table",b,[m,(0,l._)("tbody",v,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.values(E.products),(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",w,(0,r.zw)(e.product.title),1),(0,l._)("td",h,(0,r.zw)(e.qty)+" 個",1),(0,l._)("td",g,"$ "+(0,r.zw)(e.product.price),1)])))),128))])])])]),(0,l._)("div",f,[0!==E.finalOrderPrice?((0,l.wg)(),(0,l.iD)("p",y," 折扣後總價: $"+(0,r.zw)(e.$filters.numberAddComma(E.finalOrderPrice)),1)):((0,l.wg)(),(0,l.iD)("p",k," 總價: $"+(0,r.zw)(e.$filters.numberAddComma(E.order.total)),1))])])]),(0,l._)("div",C,[(0,l._)("div",x,[N,(0,l._)("div",z,[(0,l._)("div",D,[(0,l._)("table",$,[(0,l._)("tbody",O,[(0,l._)("tr",null,[L,(0,l._)("td",null,(0,r.zw)(new Date(1e3*E.order.create_at).toLocaleDateString()),1)]),(0,l._)("tr",null,[q,(0,l._)("td",null,(0,r.zw)(E.order.id),1)]),(0,l._)("tr",null,[P,(0,l._)("td",null,(0,r.zw)(E.order.user.name),1)]),(0,l._)("tr",null,[Z,(0,l._)("td",null,(0,r.zw)(E.order.user.tel),1)]),(0,l._)("tr",null,[U,(0,l._)("td",null,(0,r.zw)(E.order.user.email),1)]),(0,l._)("tr",null,[j,(0,l._)("td",null,(0,r.zw)(E.order.user.address),1)]),(0,l._)("tr",null,[V,(0,l._)("td",null,(0,r.zw)(E.order.user.payment),1)]),(0,l._)("tr",null,[W,(0,l._)("td",null,(0,r.zw)(E.order.message),1)]),(0,l._)("tr",null,[A,E.order.is_paid?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("td",H,"尚未付款"))])])])])]),(0,l._)("div",I,[(0,l.Wm)(F,{to:"/user/pay",class:"btn btn-danger",onClick:K.payOrder},{default:(0,l.w5)((()=>[S])),_:1},8,["onClick"])])])])])])])])],64)}var E=t(7897),K=t(7106),R={components:{ProgressView:K.Z},data(){return{cartData:{carts:[]},order:{user:{}},products:{},isLoading:!1,orderId:"",finalOrderPrice:0}},methods:{getOrder(e){this.isLoading=!0;const s=`https://vue3-course-api.hexschool.io/v2/api/steven1220/order/${e}`;this.$http.get(s).then((e=>{this.order=e.data.order,this.products=e.data.order.products,this.isLoading=!1;let s=0;Object.values(this.products).forEach((e=>{e.total,e.final_total,s+=e.total-e.final_total})),this.finalOrderPrice=s,E.Z.emit("get-cart"),E.Z.emit("toggle-menu")})).catch((e=>{console.log(e.response.data)}))},payOrder(){const e=this.$route.query.id,s=`https://vue3-course-api.hexschool.io/v2/api/steven1220/pay/${e}`;this.$http.post(s).then((()=>{})).catch((e=>{console.log(e.response.data)}))}},mounted(){this.getOrder(this.$route.query.id)}},B=t(89);const F=(0,B.Z)(R,[["render",Y]]);var G=F}}]);
//# sourceMappingURL=272.6fecbd21.js.map