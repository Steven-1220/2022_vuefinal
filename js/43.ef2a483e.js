"use strict";(self["webpackChunke_commerce_dessert"]=self["webpackChunke_commerce_dessert"]||[]).push([[43],{7106:function(t,e,s){s.d(e,{Z:function(){return et}});var a=s(3396),l=s(7139);const i=t=>((0,a.dD)("data-v-7885d8fe"),t=t(),(0,a.Cn)(),t),n={class:"pt-5"},c={class:"container"},o=i((()=>(0,a._)("h3",{class:"mb-3 text-primary fs-3"},"購物流程",-1))),r={class:"d-block d-sm-none"},d={class:"row row-cols-1 row-cols-lg-3"},p={class:"col"},u={class:"step-mobile"},_=i((()=>(0,a._)("span",null,"1",-1))),m=(0,a.Uk)(" 確認購買內容 "),b=i((()=>(0,a._)("i",{class:"bi bi-cart-check fs-5 ms-2"},null,-1))),h=[_,m,b],g={class:"col"},v={class:"step-mobile"},f=i((()=>(0,a._)("span",null,"2",-1))),w=(0,a.Uk)(" 填寫訂單資料 "),C=i((()=>(0,a._)("i",{class:"bi bi-pencil-square fs-5 ms-2"},null,-1))),x=[f,w,C],y={class:"col"},k={class:"step-mobile"},D=i((()=>(0,a._)("span",null,"3",-1))),$=(0,a.Uk)(" 確認付款資訊 "),L=i((()=>(0,a._)("i",{class:"bi bi-file-text fs-5 ms-2"},null,-1))),U=[D,$,L],N={class:"col"},q={class:"step-mobile"},S=i((()=>(0,a._)("span",null,"3",-1))),A=(0,a.Uk)(" 訂單付款完成 "),B=i((()=>(0,a._)("i",{class:"bi bi-credit-card fs-5 ms-2"},null,-1))),j=[S,A,B],I={class:"d-none d-sm-block"},Z={class:"row"},z={class:"col-12"},F={class:"progress-bar-container"},V=i((()=>(0,a._)("div",{class:"icon"},[(0,a._)("i",{class:"bi bi-cart-check"})],-1))),T=i((()=>(0,a._)("p",null,"1. 確認購買內容",-1))),W=[V,T],E=i((()=>(0,a._)("div",{class:"icon"},[(0,a._)("i",{class:"bi bi-pencil-square"})],-1))),H=i((()=>(0,a._)("p",null,"2. 填寫訂單資料",-1))),Y=[E,H],O=i((()=>(0,a._)("div",{class:"icon"},[(0,a._)("i",{class:"bi bi-file-text"})],-1))),P=i((()=>(0,a._)("p",null,"3. 確認付款資訊",-1))),K=[O,P],R=i((()=>(0,a._)("div",{class:"icon"},[(0,a._)("i",{class:"bi bi-credit-card"})],-1))),G=i((()=>(0,a._)("p",null,"4. 訂單付款完成",-1))),J=[R,G];function M(t,e,s,i,_,m){return(0,a.wg)(),(0,a.iD)("section",n,[(0,a._)("div",c,[o,(0,a._)("div",r,[(0,a._)("div",d,[(0,a._)("div",p,[(0,a._)("div",u,[(0,a._)("p",{class:(0,l.C_)(["text-center border border-primary p-3 clear-overlap",{"bg-warning":Number(s.step)>=1,completed:Number(s.step)>=1}])},h,2)])]),(0,a._)("div",g,[(0,a._)("div",v,[(0,a._)("p",{class:(0,l.C_)(["text-center border border-primary p-3 clear-overlap",{"bg-warning":Number(s.step)>=2,completed:Number(s.step)>=2}])},x,2)])]),(0,a._)("div",y,[(0,a._)("div",k,[(0,a._)("p",{class:(0,l.C_)(["step-mobile text-center border border-primary p-3 clear-overlap",{"bg-warning":Number(s.step)>=3,completed:Number(s.step)>=3}])},U,2)])]),(0,a._)("div",N,[(0,a._)("div",q,[(0,a._)("p",{class:(0,l.C_)(["step-mobile text-center border border-primary p-3",{"bg-warning":Number(s.step)>=4,completed:Number(s.step)>=4}])},j,2)])])])]),(0,a._)("div",I,[(0,a._)("div",Z,[(0,a._)("div",z,[(0,a._)("div",F,[(0,a._)("div",{class:(0,l.C_)(["step",{completed:Number(s.step)>=1}])},W,2),(0,a._)("div",{class:(0,l.C_)(["line",{completed:Number(s.step)>=2}])},null,2),(0,a._)("div",{class:(0,l.C_)(["step",{completed:Number(s.step)>=2}])},Y,2),(0,a._)("div",{class:(0,l.C_)(["line",{completed:Number(s.step)>=3}])},null,2),(0,a._)("div",{class:(0,l.C_)(["step",{completed:Number(s.step)>=3}])},K,2),(0,a._)("div",{class:(0,l.C_)(["line",{completed:Number(s.step)>=4}])},null,2),(0,a._)("div",{class:(0,l.C_)(["step",{completed:Number(s.step)>=4}])},J,2)])])])])])])}var Q={props:{step:String}},X=s(89);const tt=(0,X.Z)(Q,[["render",M],["__scopeId","data-v-7885d8fe"]]);var et=tt},4043:function(t,e,s){s.r(e),s.d(e,{default:function(){return bt}});var a=s(3396),l=s(7139),i=s(9242),n=s(8621);const c=t=>((0,a.dD)("data-v-624c3462"),t=t(),(0,a.Cn)(),t),o={class:"wrap"},r={class:"pt-5"},d={class:"container"},p={key:0,class:"row mb-5"},u=c((()=>(0,a._)("div",{class:"col-12 d-flex justify-content-center align-items-center"},[(0,a._)("img",{class:"cart-img",src:n,alt:"購物車無產品",style:{height:"70%","object-fit":"cover"}})],-1))),_=[u],m={class:"row"},b={class:"col-12 col-md-6 pb-4"},h={class:"d-flex justify-content-center"},g={class:"d-flex flex-column align-items-center"},v=c((()=>(0,a._)("h3",{class:"text-danger fw-bold"},[(0,a.Uk)(" 目前購物車沒有任何產品 "),(0,a._)("span",{class:"text-danger"},[(0,a._)("i",{class:"bi bi-heartbreak-fill"})])],-1))),f=(0,a.Uk)(" 購物去 "),w=c((()=>(0,a._)("i",{class:"bi bi-cart3"},null,-1))),C={class:"col-12 col-md-6 mb-5"},x={class:"d-flex justify-content-center"},y={class:"d-flex flex-column align-items-center"},k=c((()=>(0,a._)("h3",null,[(0,a.Uk)(" 我的最愛甜點 "),(0,a._)("span",null,[(0,a._)("i",{class:"bi bi-heart-fill text-primary"})])],-1))),D=(0,a.Uk)(" 查看 "),$=c((()=>(0,a._)("i",{class:"bi bi-search"},null,-1))),L={key:1,class:"col-12 col-md-6 mb-3"},U=c((()=>(0,a._)("h3",null,[(0,a.Uk)(" 我的最愛甜點 "),(0,a._)("span",null,[(0,a._)("i",{class:"bi bi-heart-fill text-primary"})])],-1))),N=(0,a.Uk)(" 查看 "),q=c((()=>(0,a._)("i",{class:"bi bi-search"},null,-1))),S={class:"row py-5"},A={class:"col"},B={class:"card"},j={class:"card-header bg-primary text-white"},I={class:"text-end"},Z=["disabled"],z={class:"card-body"},F={class:"table-responsive"},V={class:"table"},T=c((()=>(0,a._)("thead",null,[(0,a._)("tr",{class:"align-middle"},[(0,a._)("th",{scope:"col"}),(0,a._)("th",{scope:"col",class:"text-wrap",style:{width:"25%"}}," 產品名稱 "),(0,a._)("th",{scope:"col",class:"text-nowrap"},"單價"),(0,a._)("th",{scope:"col",class:"text-nowrap",style:{width:"30%"}}," 數量 "),(0,a._)("th",{scope:"col",class:"text-nowrap"},"單位"),(0,a._)("th",{class:"text-center text-nowrap",scope:"col"}," 價格 ")])],-1))),W={class:"text-nowrap"},E=["disabled","onClick"],H=c((()=>(0,a._)("i",{class:"bi bi-x-lg"},null,-1))),Y=[H],O={scope:"row"},P={key:0,class:"text-success"},K=["onUpdate:modelValue","disabled","onChange"],R={class:"text-center"},G={key:0},J=c((()=>(0,a._)("small",{class:"text-success"},"折扣價：",-1))),M={key:1},Q=c((()=>(0,a._)("td",{colspan:"5",class:"text-end"},"總計",-1))),X={class:"text-end"},tt={key:0},et=c((()=>(0,a._)("td",{colspan:"5",class:"text-end"},"折扣後價格",-1))),st={class:"text-end text-danger"},at={class:"row justify-content-between align-items-center pb-3"},lt={class:"col-md-5"},it={class:"input-group mb-3"},nt=["disabled"],ct={key:0,class:"col-md-3 d-flex justify-content-end align-items-start"},ot=(0,a.Uk)("結帳去");function rt(t,e,s,n,c,u){const H=(0,a.up)("VueLoading"),rt=(0,a.up)("ProgressView"),dt=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(H,{active:c.isLoading},null,8,["active"]),(0,a._)("div",o,[0!==c.cartData.carts.length?((0,a.wg)(),(0,a.j4)(rt,{key:0,step:"1"})):(0,a.kq)("",!0),(0,a._)("section",r,[(0,a._)("div",d,[0==c.cartData.carts.length?((0,a.wg)(),(0,a.iD)("div",p,_)):(0,a.kq)("",!0),(0,a._)("div",m,[0==c.cartData.carts.length?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("div",b,[(0,a._)("div",h,[(0,a._)("div",g,[v,(0,a.Wm)(dt,{to:"/user/products",class:"btn btn-warning fs-5"},{default:(0,a.w5)((()=>[f,w])),_:1})])])]),(0,a._)("div",C,[(0,a._)("div",x,[(0,a._)("div",y,[k,(0,a.Wm)(dt,{class:"btn btn-primary fs-5",to:"/user/favorite"},{default:(0,a.w5)((()=>[D,$])),_:1})])])])],64)):((0,a.wg)(),(0,a.iD)("div",L,[U,(0,a.Wm)(dt,{class:"btn btn-primary fs-5",to:"/user/favorite"},{default:(0,a.w5)((()=>[N,q])),_:1})]))]),0!==c.cartData.carts.length?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("div",S,[(0,a._)("div",A,[(0,a._)("div",B,[(0,a._)("div",j,[(0,a._)("div",I,[(0,a._)("button",{class:"btn btn-outline-warning",type:"button",onClick:e[0]||(e[0]=(...t)=>u.confirmDeleteAllCart&&u.confirmDeleteAllCart(...t)),disabled:0===c.cartData.carts.length}," 清空購物車 ",8,Z)])]),(0,a._)("div",z,[(0,a._)("div",F,[(0,a._)("table",V,[T,(0,a._)("tbody",W,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.cartData.carts,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,[(0,a._)("button",{type:"button",class:"btn btn-danger btn-sm",disabled:c.loadingState===e.id,onClick:t=>u.removeCartItem(e.id)},Y,8,E)]),(0,a._)("td",O,[(0,a.Uk)((0,l.zw)(e.product.title)+" ",1),e.coupon?((0,a.wg)(),(0,a.iD)("div",P," 已套用優惠券 ")):(0,a.kq)("",!0)]),(0,a._)("td",null,"$ "+(0,l.zw)(e.product.price),1),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":t=>e.qty=t,disabled:c.loadingState===e.id,onChange:t=>u.updateCartNumber(e)},null,40,K),[[i.nr,e.qty,void 0,{number:!0}]])]),(0,a._)("td",null,[(0,a._)("span",null,(0,l.zw)(e.product.unit),1)]),(0,a._)("td",R,[e.final_total!==e.total?((0,a.wg)(),(0,a.iD)("div",G,[J,(0,a.Uk)(" $ "+(0,l.zw)(t.$filters.numberAddComma(e.total-e.final_total)),1)])):((0,a.wg)(),(0,a.iD)("div",M," $"+(0,l.zw)(t.$filters.numberAddComma(e.final_total)),1))])])))),128))]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[Q,(0,a._)("td",X," $ "+(0,l.zw)(t.$filters.numberAddComma(c.cartData.total)),1)]),c.cartData.final_total!==c.cartData.total?((0,a.wg)(),(0,a.iD)("tr",tt,[et,(0,a._)("td",st," $ "+(0,l.zw)(t.$filters.numberAddComma(c.cartData.total-c.cartData.final_total)),1)])):(0,a.kq)("",!0)])])])])])])]),(0,a._)("div",at,[(0,a._)("div",lt,[(0,a._)("div",it,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>c.discountCode=t),placeholder:"請輸入優惠碼 d123"},null,512),[[i.nr,c.discountCode]]),(0,a._)("button",{class:"btn btn-outline-secondary text-primary",type:"button",disabled:0===c.cartData.carts.length||c.enterCouponState,onClick:e[2]||(e[2]=(...t)=>u.addCoupon&&u.addCoupon(...t))}," 套用優惠碼 ",8,nt)])]),0!==c.cartData.carts.length?((0,a.wg)(),(0,a.iD)("div",ct,[(0,a.Wm)(dt,{to:"/user/order",class:"btn btn-lg btn-primary"},{default:(0,a.w5)((()=>[ot])),_:1})])):(0,a.kq)("",!0)])],64)):(0,a.kq)("",!0)])])])],64)}var dt=s(7897),pt=s(7106),ut={components:{ProgressView:pt.Z},data(){return{cartData:{carts:[]},discountCode:"",enterCouponState:!0,loadingState:"",isLoading:!1}},watch:{discountCode(){""!==this.discountCode?this.enterCouponState=!1:this.enterCouponState=!0}},methods:{getCartList(){const t="https://vue3-course-api.hexschool.io/v2/api/steven1220/cart";this.$http.get(t).then((t=>{this.cartData=t.data.data,dt.Z.emit("toggle-menu")})).catch((t=>{console.log(t.response.data)}))},updateCartNumber(t){if(0==t.qty||t.qty<0)return this.$swal.fire({title:"數量至少為1個 ",icon:"warning",confirmButtonColor:"#3C3F5F",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}}),void this.getCartList();this.loadingState=t.id;const e={product_id:t.id,qty:t.qty},s=`https://vue3-course-api.hexschool.io/v2/api/steven1220/cart/${t.id}`;this.$http.put(s,{data:e}).then((()=>{const t=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",this.$swal.stopTimer),t.addEventListener("mouseleave",this.$swal.resumeTimer)}});t.fire({icon:"success",title:"已產品變更數量"}),this.getCartList(),this.loadingState="",dt.Z.emit("get-cart")})).catch((t=>{console.log(t.response.data)}))},removeCartItem(t){this.loadingState=t;const e=`https://vue3-course-api.hexschool.io/v2/api/steven1220/cart/${t}`;this.$http.delete(e).then((()=>{this.getCartList(),this.loadingState="",dt.Z.emit("get-cart")})).catch((t=>{console.log(t.response.data)}))},confirmDeleteAllCart(){this.$swal.fire({title:"確定是否刪除購物車全部商品",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3C3F5F",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"}).then((t=>{t.isConfirmed&&(this.deleteAllCartItem(),this.$swal.fire("已全部刪除購物車商品","","success"))}))},deleteAllCartItem(){const t="https://vue3-course-api.hexschool.io/v2/api/steven1220/carts";this.$http.delete(t).then((()=>{this.getCartList(),dt.Z.emit("get-cart")})).catch((t=>{console.log(t.response.data)}))},addCoupon(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2/api/steven1220/coupon",e={code:this.discountCode};this.$http.post(t,{data:e}).then((()=>{this.getCartList(),this.isLoading=!1})).catch((()=>{this.isLoading=!1,this.$swal.fire({title:"折扣碼失效",icon:"warning",confirmButtonColor:"#3C3F5F",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})}))},LoadingEffect(){this.isLoading=!0,setTimeout((()=>{this.isLoading=!1}),500)}},mounted(){this.getCartList(),this.LoadingEffect()}},_t=s(89);const mt=(0,_t.Z)(ut,[["render",rt],["__scopeId","data-v-624c3462"]]);var bt=mt},8621:function(t,e,s){t.exports=s.p+"img/cart.e0b6458b.jpg"}}]);
//# sourceMappingURL=43.ef2a483e.js.map