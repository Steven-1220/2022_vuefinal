{"version":3,"file":"js/952.cf8f9689.js","mappings":"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","sources":["webpack://e-commerce-dessert/./src/views/MyFavorite.vue","webpack://e-commerce-dessert/./src/views/MyFavorite.vue?45d9"],"sourcesContent":["<template>\n  <VueLoading :active=\"isLoading\" />\n  <div class=\"container-md py-5\">\n    <h2 class=\"text-center mb-3 mb-md-4\">\n      我的最愛甜點<i class=\"bi bi-heart-fill text-danger\"></i>\n    </h2>\n    <div class=\"row justify-content-center mb-4 mb-md-5\">\n      <div class=\"col-10 d-flex justify-content-center\">\n        <img\n          src=\"../assets/images/favorite.jpg\"\n          class=\"fav-img\"\n          alt=\"我的最愛\"\n        />\n      </div>\n    </div>\n\n    <template v-if=\"favorite.length !== 0\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-12 col-lg-10\">\n          <ul class=\"list-group list-group-flush\">\n            <li\n              class=\"list-group-item d-flex justify-content-between align-items-center overflow-auto\"\n              v-for=\"item in favProducts\"\n              :key=\"item.id\"\n            >\n              <RouterLink\n                class=\"d-flex text-decoration-none\"\n                :to=\"`product/${item.id}`\"\n              >\n                <img :src=\"item.imageUrl\" :alt=\"item.category\" />\n                <div\n                  class=\"product-infos d-flex flex-md-row flex-column align-items-md-center ms-3 ms-lg-5\"\n                >\n                  <h2 class=\"name mb-0 fw-bold\">{{ item.title }}</h2>\n                  <div\n                    class=\"price d-flex flex-md-row flex-column align-items-md-center ms-md-4\"\n                  >\n                    <div\n                      class=\"text-muted text-decoration-line-through fs-6 me-lg-3 me-2\"\n                    >\n                      原價 NT$ <span class=\"fs-6\">{{ item.origin_price }}</span>\n                    </div>\n                    <div class=\"text-danger fw-bold fs-6\">\n                      特價 NT$ <span class=\"fs-5\">{{ item.price }}</span>\n                    </div>\n                  </div>\n                </div>\n              </RouterLink>\n              <div class=\"d-flex\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn-primary text-nowrap\"\n                  :disabled=\"loadingState\"\n                  @click=\"addToCart(item.id)\"\n                >\n                  加入購物車\n                </button>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-danger ms-2 ms-lg-3\"\n                  @click=\"delMyFavorite(item.id)\"\n                >\n                  <i class=\"bi bi-x-lg\"></i>\n                </button>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </template>\n\n    <div class=\"row\" v-else>\n      <div\n        class=\"col-12 d-flex justify-content-center align-items-center flex-column\"\n      >\n        <p class=\"fs-4\">目前沒有加入最愛的甜點</p>\n        <RouterLink to=\"/user/products\" class=\"btn btn-lg btn-warning\"\n          >購物去</RouterLink\n        >\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from \"@/libraries/emitter\";\n\nexport default {\n  data() {\n    return {\n      products: [],\n      favProducts: [],\n      favorite: JSON.parse(localStorage.getItem(\"favorite\")) || [],\n      loadingState: false,\n      isLoading: false,\n    };\n  },\n\n  watch: {\n    favorite: {\n      handler() {\n        localStorage.setItem(\"favorite\", JSON.stringify(this.favorite));\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    getAllProducts() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.products = res.data.products;\n          this.filterMyFav();\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          console.log(err.response.data);\n        });\n    },\n    filterMyFav() {\n      this.favProducts = this.products.filter(\n        (item) => this.favorite.indexOf(item.id) !== -1,\n      );\n    },\n    delMyFavorite(id) {\n      const delHeartIndex = this.favorite.findIndex((item) => item === id);\n      const delFavProduct = this.favProducts.filter((item) => {\n        return item.id === id;\n      });\n\n      this.favorite.splice(delHeartIndex, 1);\n      this.getAllProducts();\n      setTimeout(() => {\n        this.$swal.fire({\n          title: `<i class=\"text-danger bi bi-heartbreak-fill\"></i> 已刪除 ${delFavProduct[0].title} `,\n          confirmButtonColor: \"#3C3F5F\",\n          showClass: {\n            popup: \"animate__animated animate__fadeInDown\",\n          },\n          hideClass: {\n            popup: \"animate__animated animate__fadeOutUp\",\n          },\n        });\n      }, 500);\n    },\n    addToCart(id) {\n      const data = {\n        product_id: id,\n        qty: 1,\n      };\n      this.loadingState = true;\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`,\n          { data },\n        )\n        .then(() => {\n          const Toast = this.$swal.mixin({\n            toast: true,\n            position: \"top-end\",\n            showConfirmButton: false,\n            timer: 1500,\n            timerProgressBar: true,\n            didOpen: (toast) => {\n              toast.addEventListener(\"mouseenter\", this.$swal.stopTimer);\n              toast.addEventListener(\"mouseleave\", this.$swal.resumeTimer);\n            },\n          });\n\n          Toast.fire({\n            icon: \"success\",\n            title: \"成功加入購物車\",\n          });\n\n          emitter.emit(\"get-cart\");\n          this.loadingState = false;\n        })\n        .catch((err) => {\n          console.log(err.response.data);\n        });\n    },\n  },\n  mounted() {\n    this.getAllProducts();\n    emitter.emit(\"toggle-menu\");\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.list-group-item {\n  &:hover {\n    background-color: #ffd34c;\n  }\n  img {\n    max-width: 50px;\n    max-height: 50px;\n    object-fit: cover;\n  }\n  button {\n    font-size: 14px;\n    padding: 4px 6px;\n  }\n  @media (min-width: 768px) {\n    img {\n      max-width: 90px;\n      max-height: 90px;\n    }\n    button {\n      font-size: 16px;\n      padding: 6px 12px;\n    }\n  }\n  @media (min-width: 992px) {\n    img {\n      max-width: 120px;\n      max-height: 120px;\n    }\n  }\n}\n\n.product-infos {\n  .name {\n    font-size: 16px;\n  }\n  @media (min-width: 992px) {\n    .name {\n      font-size: 20px;\n    }\n  }\n}\n\n.fav-img {\n  width: 70%;\n  @media (min-width: 768px) {\n    width: 40%;\n  }\n\n  @media (min-width: 992px) {\n    width: 30%;\n  }\n}\n</style>\n","import { render } from \"./MyFavorite.vue?vue&type=template&id=756848f0&scoped=true\"\nimport script from \"./MyFavorite.vue?vue&type=script&lang=js\"\nexport * from \"./MyFavorite.vue?vue&type=script&lang=js\"\n\nimport \"./MyFavorite.vue?vue&type=style&index=0&id=756848f0&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Steven\\\\Desktop\\\\2022_vuefinal\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-756848f0\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_20","_createVNode","_component_VueLoading","active","$data","_hoisted_2","length","_createElementBlock","_Fragment","_renderList","item","key","id","_component_RouterLink","to","src","imageUrl","alt","category","_toDisplayString","title","origin_price","price","type","disabled","onClick","$options","_hoisted_18","_hoisted_24","data","products","favProducts","favorite","JSON","parse","localStorage","getItem","loadingState","isLoading","watch","handler","setItem","stringify","this","deep","methods","getAllProducts","url","$http","get","then","res","filterMyFav","catch","err","console","log","response","filter","indexOf","delMyFavorite","delHeartIndex","findIndex","delFavProduct","splice","setTimeout","$swal","fire","confirmButtonColor","showClass","popup","hideClass","addToCart","product_id","qty","post","Toast","mixin","toast","position","showConfirmButton","timer","timerProgressBar","didOpen","addEventListener","stopTimer","resumeTimer","icon","emitter","mounted","__exports__","render"],"sourceRoot":""}